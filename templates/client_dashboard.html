{% extends "layout.html" %}
{% block content %}
<div class="body-content">
    <div class="row">
        <div class="col-sm-9">
            <h1>Welcome to your client dashbaord {{user.first_name}}</h1>
            <div style="padding-bottom: 10px;">
                <button class="btn btn-primary show-client_form" href="#" data-url="{% url 'create_client' %}">Add Client</a></button>
            </div>
            <table class="table table-striped table-bordered table-sm" cellspacing="0" width="100%" id="client_table">
                <thead>
                <th style="width:25%">Client #</th>
                <th style="width:50%">Client Name</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>
 
<!-- Modal -->
<div class="modal fade" id="modal-new_client">
    <div class="modal-dialog">
        <div class="modal-content"></div>
    </div>
</div>

{% endblock content %}
{% block scripts %}
    <script>
        $(document).ready(function(){
            var endpoint = "{% url 'clientAPI' %}";


            $('#client_table').DataTable({
                "sDom":'lrtip',
                "bInfo":false,
                "bPaginate":false,
                "processing":true,
                "serverSide":true,
                "paging":false,
                "ajax":{
                    "url":endpoint,
                    "dataSrc":'',
                },
                /*
                "rowCallback":function(fow,data){
                    $('td:eq(1)',row).attr('href','dashboard/client_page/' + data.slug)
                }*/
                "columns":[
                    {"data":"number",},
                    {"data":"name",
                    "render":function(data,type,row,meta){
                        if(type === 'display'){
                            data = '<a href="/dashboard/client_page/'+ row.slug +'">' + data + '</a>';
                            console.log(row);
                        }

                    return data;
                    }}
                ],
            });

        })
    </script>
{% endblock scripts %}






